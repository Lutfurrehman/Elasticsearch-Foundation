####################################
#### Index strategies ####

# settings at the time of creating index

PUT myindex2
{
  "settings": {
    "number_of_shards": 1
    , "number_of_replicas": 1
  }
}

# check settings
GET myindex2

# change no of primary shards
PUT myindex2/_settings
{
  "index": {
    "number_of_shards": 5
  }
}
## primary shards can't be changes once created

# change no of replicas
PUT myindex2/_settings
{
  "index": {
    "number_of_replicas": 2
  }
}
## replicas can be changed on the fly

# check no of primary and replica now
GET myindex2/_settings
## no of replicas changed from 1 to 2

# read only index
PUT myindex2/_settings
{
  "index.blocks.write" : true
}

## try to put document now
PUT myindex2/type/1
{
  "name": "urname"
}

## remove write block
PUT myindex2/_settings
{
  "index.blocks.write" : false
}

## try to write now
PUT myindex2/type/1
{
  "name" : "urname"
}

## delete index
DELETE myindex2

### index template #####
# create template for index pattern switch* and router*
PUT _template/mytemplate
  {
  "index_patterns": ["switch*","router*"],
  "settings": {
    "number_of_shards": 4,
    "number_of_replicas": 4
  },
  "mappings": {
    "type": {
      "properties": {
        "name": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            } 
            }
          }
        }
      }
    }
  }

# creat index switch_1
PUT switch_1

# check switch_1 settings
GET switch_1
# why no of shards are 4 instead of 5
# why no of replicas are 4 instead of 1
# where did filed name and its mapping came from

## get template settigs of specific template
GET _template/mytemplate

## get settings of all templates
GET _template

## to check if template exists
HEAD _template/mytemplate

## delete template
DELETE _template/mytemplate

## delete index
DELETE switch_1

## orders in templates########
## craete template with custom settings of order 0
PUT _template/mytemplate0
  {
  "index_patterns": ["switch*","router*"],
  "order" : 0,
  "settings": {
    "number_of_shards": 4,
    "number_of_replicas": 4
  },
  "mappings": {
    "type": {
      "properties": {
        "name": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            } 
            }
          }
        }
      }
    }
  }
  
## craete template with custom settings of order 1
PUT _template/mytemplate1
{
  "index_patterns":["switchlan1*"],
  "order": 1,
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 3
  }
}

## craete template with custom settings of order 2
PUT _template/mytemplate2
{
  "index_patterns":["routerlan1*"],
  "order": 2,
  "settings": {
    "number_of_shards": 2,
    "number_of_replicas": 2
  }
}

## test order
# creat index which satisfy switch* criteria
PUT switch_1

## check settings 
GET switch_1
## no of shards
## no of replicas
## mappings
## settings are picked up from template with order 0

## create index which satisfy switchlan1* criteria
PUT switchlan15

##check settings
GET switchlan15
## no of shards .. why 3 not 4
## no of replicas .. why 3 not 4
## mappings... where they came from

## create index which satisfy routerlan1* criteria
PUT routerlan19

## check settings
GET routerlan19
## no of shards 2...why not 3 or 4
## no of replicas 2... why not 3 or 4
## mappings ...where they came from


## delete template
DELETE _template/mytemplate0
DELETE _template/mytemplate1
DELETE _template/mytemplate2
## delete indices
DELETE switch_1
DELETE switchlan15
DELETE routerlan19

## all templates are deleted now create new index
PUT newindex

## check settings
GET newindex
## no of shards should be 5....default value
## no of replicas should be 1....default value
## no mappings as per by default

#### End of indexing stratgies ####
###################################